# Railway Configuration
# Deploy backend + database with one click

[deploy]
  builder = "NIXPACKS"
  buildCommand = "npm run build --workspace=backend"
  startCommand = "npm run start --workspace=backend"

[services.backend]
  source = "."
  builder = "NIXPACKS"
  
  [services.backend.healthcheck]
    path = "/health"
    interval = 30
    timeout = 10

[services.postgres]
  image = "postgres:15-alpine"
  
  [services.postgres.env]
    POSTGRES_DB = "meetconnect"
    POSTGRES_USER = "meetconnect"
    POSTGRES_PASSWORD = { generate = true }

[services.redis]
  image = "redis:7-alpine"
